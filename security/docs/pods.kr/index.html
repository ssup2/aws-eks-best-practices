
<!doctype html>
<html lang="kr" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.4.2, mkdocs-material-8.5.10">
    
    
      
        <title>포드 보안 - EKS Best Practices Guides</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.975780f9.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.2505c338.min.css">
        
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  


  <script id="__analytics">function __md_analytics(){function n(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],n("js",new Date),n("config","G-VQGL8B2FH8"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){this.value&&n("event","search",{search_term:this.value})}),document$.subscribe(function(){var a=document.forms.feedback;if(void 0!==a)for(var e of a.querySelectorAll("[type=submit]"))e.addEventListener("click",function(e){e.preventDefault();var t=document.location.pathname,e=this.getAttribute("data-md-value");n("event","feedback",{page:t,data:e}),a.firstElementChild.disabled=!0;e=a.querySelector(".md-feedback__note [data-md-value='"+e+"']");e&&(e.hidden=!1)}),a.hidden=!1}),location$.subscribe(function(e){n("config","G-VQGL8B2FH8",{page_path:e.pathname})})});var e=document.createElement("script");e.async=!0,e.src="https://www.googletagmanager.com/gtag/js?id=G-VQGL8B2FH8",document.getElementById("__analytics").insertAdjacentElement("afterEnd",e)}</script>

  
    <script>"undefined"!=typeof __md_analytics&&__md_analytics()</script>
  

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="" data-md-color-accent="">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#_1" class="md-skip">
          콘텐츠로 이동
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="EKS Best Practices Guides" class="md-header__button md-logo" aria-label="EKS Best Practices Guides" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            EKS Best Practices Guides
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              포드 보안
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          
          
          <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="" data-md-color-accent=""  aria-label="switch to dark mode"  type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="switch to dark mode" for="__palette_2" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
            </label>
          
        
          
          
          
          <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="" data-md-color-accent=""  aria-label="switch to light mode"  type="radio" name="__palette" id="__palette_2">
          
            <label class="md-header__button md-icon" title="switch to light mode" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12c0-2.42-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
            </label>
          
        
      </form>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="검색" placeholder="검색" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="검색">
        
        <button type="reset" class="md-search__icon md-icon" title="지우기" aria-label="지우기" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            검색 초기화
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/aws/aws-eks-best-practices" title="저장소로 이동" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    aws/aws-eks-best-practices
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="EKS Best Practices Guides" class="md-nav__button md-logo" aria-label="EKS Best Practices Guides" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    EKS Best Practices Guides
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/aws/aws-eks-best-practices" title="저장소로 이동" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    aws/aws-eks-best-practices
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1" type="checkbox" id="__nav_1" >
      
      
      
      
        <label class="md-nav__link" for="__nav_1">
          Guides
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Guides" data-md-level="1">
        <label class="md-nav__title" for="__nav_1">
          <span class="md-nav__icon md-icon"></span>
          Guides
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        Introduction ({'name': 'English', 'build': True})
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2">
          Security
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Security" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Security
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../" class="md-nav__link">
        Home ({'name': 'English', 'build': True})
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../iam/" class="md-nav__link">
        Identity and Access Management ({'name': 'English', 'build': True})
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../pods/" class="md-nav__link">
        Pod Security ({'name': 'English', 'build': True})
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../multitenancy/" class="md-nav__link">
        Multi-tenancy ({'name': 'English', 'build': True})
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../detective/" class="md-nav__link">
        Detective Controls ({'name': 'English', 'build': True})
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../network/" class="md-nav__link">
        Network Security ({'name': 'English', 'build': True})
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../data/" class="md-nav__link">
        Data Encryption and Secrets Management ({'name': 'English', 'build': True})
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../runtime/" class="md-nav__link">
        Runtime Security ({'name': 'English', 'build': True})
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../hosts/" class="md-nav__link">
        Infrastructure Security ({'name': 'English', 'build': True})
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../compliance/" class="md-nav__link">
        Regulatory Compliance ({'name': 'English', 'build': True})
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../incidents/" class="md-nav__link">
        Incident Response and Forensics ({'name': 'English', 'build': True})
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../image/" class="md-nav__link">
        Image Security ({'name': 'English', 'build': True})
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3">
          Cluster Autoscaling
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Cluster Autoscaling" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Cluster Autoscaling
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../karpenter/" class="md-nav__link">
        Karpenter ({'name': 'English', 'build': True})
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../cluster-autoscaling/" class="md-nav__link">
        Cluster-Autoscaler ({'name': 'English', 'build': True})
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" >
      
      
      
      
        <label class="md-nav__link" for="__nav_4">
          Reliability
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Reliability" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Reliability
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../reliability/docs/" class="md-nav__link">
        Home ({'name': 'English', 'build': True})
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../reliability/docs/application/" class="md-nav__link">
        Applications ({'name': 'English', 'build': True})
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../reliability/docs/controlplane/" class="md-nav__link">
        Control Plane ({'name': 'English', 'build': True})
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../reliability/docs/dataplane/" class="md-nav__link">
        Data Plane ({'name': 'English', 'build': True})
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" >
      
      
      
      
        <label class="md-nav__link" for="__nav_5">
          Windows Containers
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Windows Containers" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Windows Containers
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../windows/docs/ami/" class="md-nav__link">
        AMI Management ({'name': 'English', 'build': True})
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../windows/docs/gmsa/" class="md-nav__link">
        gMSA for Windows Containers ({'name': 'English', 'build': True})
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../windows/docs/hardening/" class="md-nav__link">
        Windows Server Hardening ({'name': 'English', 'build': True})
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../windows/docs/images/" class="md-nav__link">
        Scanning Windows Images ({'name': 'English', 'build': True})
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../windows/docs/licensing/" class="md-nav__link">
        Windows Versions and Licensing ({'name': 'English', 'build': True})
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../windows/docs/logging/" class="md-nav__link">
        Logging ({'name': 'English', 'build': True})
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../windows/docs/monitoring/" class="md-nav__link">
        Monitoring Windows Containers ({'name': 'English', 'build': True})
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../windows/docs/networking/" class="md-nav__link">
        Windows Networking ({'name': 'English', 'build': True})
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../windows/docs/oom/" class="md-nav__link">
        Memory and Systems Management ({'name': 'English', 'build': True})
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../windows/docs/patching/" class="md-nav__link">
        Infrastructure Management ({'name': 'English', 'build': True})
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../windows/docs/scheduling/" class="md-nav__link">
        Scheduling ({'name': 'English', 'build': True})
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../windows/docs/security/" class="md-nav__link">
        Pod Security for Windows Containers ({'name': 'English', 'build': True})
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../windows/docs/storage/" class="md-nav__link">
        Storage Options ({'name': 'English', 'build': True})
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6" type="checkbox" id="__nav_6" >
      
      
      
      
        <label class="md-nav__link" for="__nav_6">
          Networking
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Networking" data-md-level="1">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          Networking
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../networking/index/" class="md-nav__link">
        Home ({'name': 'English', 'build': True})
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../networking/subnets/" class="md-nav__link">
        VPC and Subnet Considerations ({'name': 'English', 'build': True})
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../networking/vpc-cni/" class="md-nav__link">
        Amazon VPC CNI ({'name': 'English', 'build': True})
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../networking/prefix-mode/index_linux/" class="md-nav__link">
        Prefix Mode for Linux ({'name': 'English', 'build': True})
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../networking/prefix-mode/index_windows/" class="md-nav__link">
        Prefix Mode for Windows ({'name': 'English', 'build': True})
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../networking/ipv6/" class="md-nav__link">
        Running IPv6 Clusters ({'name': 'English', 'build': True})
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../networking/sgpp/" class="md-nav__link">
        Security Groups per Pod ({'name': 'English', 'build': True})
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../networking/custom-networking/" class="md-nav__link">
        Custom Networking ({'name': 'English', 'build': True})
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../networking/loadbalancing/loadbalancing/" class="md-nav__link">
        Load Balancing ({'name': 'English', 'build': True})
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../networking/monitoring/" class="md-nav__link">
        Monitoring for Network performance issues ({'name': 'English', 'build': True})
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7" type="checkbox" id="__nav_7" >
      
      
      
      
        <label class="md-nav__link" for="__nav_7">
          Scalability
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Scalability" data-md-level="1">
        <label class="md-nav__title" for="__nav_7">
          <span class="md-nav__icon md-icon"></span>
          Scalability
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../scalability/docs/" class="md-nav__link">
        Home ({'name': 'English', 'build': True})
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../scalability/docs/control-plane/" class="md-nav__link">
        Control Plane ({'name': 'English', 'build': True})
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../scalability/docs/data-plane/" class="md-nav__link">
        Data Plane ({'name': 'English', 'build': True})
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../scalability/docs/cluster-services/" class="md-nav__link">
        Cluster Services ({'name': 'English', 'build': True})
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../scalability/docs/workloads/" class="md-nav__link">
        Workloads ({'name': 'English', 'build': True})
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../scalability/docs/scaling_theory/" class="md-nav__link">
        The theory behind scaling ({'name': 'English', 'build': True})
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../scalability/docs/kcp_monitoring/" class="md-nav__link">
        Control plane monitoring ({'name': 'English', 'build': True})
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../scalability/docs/node_efficiency/" class="md-nav__link">
        Node efficiency and scaling ({'name': 'English', 'build': True})
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../upgrades/" class="md-nav__link">
        Cluster Upgrades ({'name': 'English', 'build': True})
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="목차">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      목차
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    리눅스 기능
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    노드 승인
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    포드 보안 솔루션
  </a>
  
    <nav class="md-nav" aria-label="포드 보안 솔루션">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#psp" class="md-nav__link">
    포드 보안 정책(PSP)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    새로운 포드 보안 솔루션으로 마이그레이션
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pac" class="md-nav__link">
    코드로서의 정책(PAC)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pss-psa" class="md-nav__link">
    포드 보안 표준(PSS) 및 포드 보안 승인(PSA)
  </a>
  
    <nav class="md-nav" aria-label="포드 보안 표준(PSS) 및 포드 보안 승인(PSA)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    기존 포드
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    면제
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#policy-as-code-pod" class="md-nav__link">
    Policy-as-Code와 Pod 보안 표준 중에서 선택
  </a>
  
    <nav class="md-nav" aria-label="Policy-as-Code와 Pod 보안 표준 중에서 선택">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    요약
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    추천
  </a>
  
    <nav class="md-nav" aria-label="추천">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#psapod-security-admission" class="md-nav__link">
    더 나은 사용자 경험을 위해 여러 PSA(Pod Security Admission) 모드 사용
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    권한 있는 권한으로 실행할 수 있는 컨테이너 제한
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_11" class="md-nav__link">
    컨테이너에서 루트로 프로세스를 실행하지 마십시오.
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#docker-docker" class="md-nav__link">
    Docker에서 Docker를 실행하거나 컨테이너에 소켓을 마운트하지 마십시오.
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hostpath-hostpath" class="md-nav__link">
    hostPath 사용을 제한하거나 hostPath가 필요한 경우 사용할 수 있는 접두사를 제한하고 볼륨을 읽기 전용으로 구성합니다.
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dos" class="md-nav__link">
    리소스 경합 및 DoS 공격을 피하기 위해 각 컨테이너에 대한 요청 및 제한 설정
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_12" class="md-nav__link">
    특권 에스컬레이션을 허용하지 않음
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#serviceaccount" class="md-nav__link">
    ServiceAccount 토큰 탑재 비활성화
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_13" class="md-nav__link">
    서비스 검색 비활성화
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_14" class="md-nav__link">
    읽기 전용 루트 파일 시스템으로 이미지 구성
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_15" class="md-nav__link">
    도구 및 리소스
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  <a href="https://github.com/aws/aws-eks-best-practices/edit/master/docs/security/docs/pods.kr.md" title="이 페이지를 편집" class="md-content__button md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z"/></svg>
  </a>


<ul>
<li class="i18n-link i18n-link-found i18n-link-en"><a href="../../../security/docs/pods/">{'name': 'English', 'build': True}</a></li>
</ul>
<h1 id="_1">포드 보안<a class="headerlink" href="#_1" title="Permanent link">&para;</a></h1>
<p>포드 사양에는 전반적인 보안 태세를 강화하거나 약화시킬 수 있는 다양한 속성이 포함되어 있습니다. 쿠버네티스 실무자로서 주요 관심사는 컨테이너에서 실행 중인 프로세스가 컨테이너 런타임의 격리 경계를 벗어나 기본 호스트에 대한 액세스 권한을 얻지 못하도록 하는 것입니다.</p>
<h3 id="_2">리눅스 기능<a class="headerlink" href="#_2" title="Permanent link">&para;</a></h3>
<p>컨테이너 내에서 실행되는 프로세스는 기본적으로 [ Linux ] 루트 사용자의 컨텍스트에서 실행됩니다. 컨테이너 내의 루트 작업은 컨테이너 런타임이 컨테이너에 할당하는 Linux 기능 세트에 의해 부분적으로 제한되지만 이러한 기본 권한을 통해 공격자는 권한을 에스컬레이션하거나 호스트에 바인딩된 민감한 정보에 액세스할 수 있습니다. 비밀 및 ConfigMap을 포함합니다. 다음은 컨테이너에 할당된 기본 기능 목록입니다. 각 기능에 대한 추가 정보는 <a href="http://man7.org/linux/man-pages/man7/capabilities를 참조하십시오. 7.html"> http://man7.org/linux/man-pages/man7/capabilities.7.html </a>.</p>
<p><code>CAP_AUDIT_WRITE, CAP_CHOWN, CAP_DAC_OVERRIDE, CAP_FOWNER, CAP_FSETID, CAP_KILL, CAP_MKNOD, CAP_NET_BIND_SERVICE, CAP_NET_RAW, CAP_SETGID, CAP_SETUID, CAP_SETFCAP, CAP_SETPCAP, CAP_SYS_CHROOT</code></p>
<div class="admonition 정보">
<p class="admonition-title">정보</p>
</div>
<p>EC2 및 Fargate 포드에는 기본적으로 앞서 언급한 기능이 할당됩니다. 또한 Linux 기능은 Fargate 포드에서만 삭제할 수 있습니다.</p>
<p>권한이 있는 상태로 실행되는 포드 는 호스트의 루트와 연결된 Linux 기능의 <em>all</em> 을 상속합니다. 가능하면 피해야 합니다.</p>
<h3 id="_3">노드 승인<a class="headerlink" href="#_3" title="Permanent link">&para;</a></h3>
<p>노드 권한 부여 ]( https://kubernetes.io/docs/reference/access-authn-authz/node/ ) 라는 권한 부여 모드를 사용합니다 . 노드 권한 부여는 kubelet에서 발생하는 모든 API 요청에 권한을 부여하고 노드가 다음 작업을 수행할 수 있도록 합니다.</p>
<p>읽기 작업:</p>
<ul>
<li>서비스</li>
<li>끝점</li>
<li>노드</li>
<li>포드</li>
<li>kubelet의 노드에 바인딩된 포드와 관련된 비밀, 구성 맵, 영구 볼륨 클레임 및 영구 볼륨</li>
</ul>
<p>쓰기 작업:</p>
<ul>
<li>노드 및 노드 상태( <code>NodeRestriction</code> 허용 플러그인을 활성화하여 kubelet이 자신의 노드를 수정하도록 제한)</li>
<li>pod 및 pod 상태( <code>NodeRestriction</code> 승인 플러그인을 활성화하여 kubelet이 자신에게 바인딩된 pod를 수정하도록 제한)</li>
<li>이벤트</li>
</ul>
<p>인증 관련 작업:</p>
<ul>
<li>TLS 부트스트래핑을 위한 CertificateSigningRequest(CSR) API에 대한 읽기/쓰기 액세스</li>
<li>위임된 인증/권한 확인을 위해 TokenReview 및 SubjectAccessReview를 생성하는 기능</li>
</ul>
<p>EKS는 <a href="https://kubernetes.io/docs/reference/access-authn-authz/admission-controllers/#noderestriction"> 노드 제한 승인 컨트롤러 </a>를 사용하여 노드가 제한된 노드 속성 및 포드 세트만 수정하도록 허용합니다. 노드에 바인딩된 개체입니다. 그럼에도 불구하고 호스트에 대한 액세스를 관리하는 공격자는 클러스터 내에서 측면 이동을 허용할 수 있는 Kubernetes API에서 환경에 대한 민감한 정보를 수집할 수 있습니다.</p>
<h2 id="_4">포드 보안 솔루션<a class="headerlink" href="#_4" title="Permanent link">&para;</a></h2>
<h3 id="psp">포드 보안 정책(PSP)<a class="headerlink" href="#psp" title="Permanent link">&para;</a></h3>
<p>과거에는 <a href="https://kubernetes.io/docs/concepts/policy/pod-security-policy/"> 포드 보안 정책(PSP) </a> 리소스를 사용하여 포드가 충족해야 하는 일련의 요구 사항을 지정했습니다. 만들 수 있습니다. Kubernetes 버전 1.21부터 PSP는 더 이상 사용되지 않습니다. Kubernetes 버전 1.25에서 제거될 예정입니다.</p>
<div class="admonition 주목">
<p class="admonition-title">주목</p>
</div>
<p>Kubernetes 버전 1.21에서 <a href="https://kubernetes.io/blog/2021/04/06/podsecuritypolicy-deprecation-past-present-and-future/">PSP는 더 이상 사용되지 않습니다</a>. 버전 1.25까지 또는 대안으로 전환하는 데 대략 2년이 걸립니다. 이 <a href="https://github.com/kubernetes/enhancements/blob/master/keps/sig-auth/2579-psp-replacement/README.md#motivation">문서</a>는 이러한 지원 중단의 동기를 설명합니다.</p>
<h3 id="_5">새로운 포드 보안 솔루션으로 마이그레이션<a class="headerlink" href="#_5" title="Permanent link">&para;</a></h3>
<p>PSP는 제거될 예정이며 더 이상 활성 개발 중이 아니므로 클러스터 관리자와 운영자는 이러한 보안 제어를 교체해야 합니다. 두 가지 솔루션으로 이러한 요구를 충족할 수 있습니다.</p>
<ul>
<li>Kubernetes 에코시스템의 PAC(Policy-as-code) 솔루션</li>
<li>Kubernetes <a href="https://kubernetes.io/docs/concepts/security/pod-security-standards/"> 포드 보안 표준(PSS) </a></li>
</ul>
<p>PAC 및 PSS 솔루션은 모두 PSP와 공존할 수 있습니다. PSP가 제거되기 전에 클러스터에서 사용할 수 있습니다. 이렇게 하면 PSP에서 마이그레이션할 때 채택이 쉬워집니다. PSP에서 PSS로 마이그레이션을 고려하는 경우 이 <a href="https://kubernetes.io/docs/tasks/configure-pod-container/migrate-from-psp/"> 문서 </a>를 참조하십시오.</p>
<h3 id="pac">코드로서의 정책(PAC)<a class="headerlink" href="#pac" title="Permanent link">&para;</a></h3>
<p>PAC(Policy-as-code) 솔루션은 규정된 자동 제어를 통해 클러스터 사용자를 안내하고 원치 않는 동작을 방지하는 가드레일을 제공합니다. PAC는 <a href="https://kubernetes.io/docs/reference/access-authn-authz/admission-controllers/"> Kubernetes 동적 승인 컨트롤러 </a>를 사용하여 웹후크 호출을 통해 Kubernetes API 서버 요청 흐름을 가로채고 변형 및 검증합니다. 코드로 작성되고 저장된 정책을 기반으로 페이로드를 요청합니다. 변형 및 유효성 검사는 API 서버 요청으로 인해 클러스터가 변경되기 전에 발생합니다. PAC 솔루션은 정책을 사용하여 분류 및 값을 기반으로 API 서버 요청 페이로드를 일치시키고 작동합니다.</p>
<p>Kubernetes에 사용할 수 있는 몇 가지 오픈 소스 PAC 솔루션이 있습니다. 이러한 솔루션은 Kubernetes 프로젝트의 일부가 아닙니다. Kubernetes 생태계에서 제공됩니다. 일부 PAC 솔루션은 다음과 같습니다.</p>
<ul>
<li><a href="https://open-policy-agent.github.io/gatekeeper/website/docs/"> OPA/게이트키퍼 </a></li>
<li><a href="https://www.openpolicyagent.org/"> 오픈 정책 에이전트(OPA) </a></li>
<li><a href="https://kyverno.io/"> 카이베르노 </a></li>
<li><a href="https://www.kubewarden.io/"> Kubewarden </a></li>
<li><a href="https://www.jspolicy.com/"> jsPolicy </a></li>
</ul>
<p>PAC 솔루션에 대한 자세한 내용과 필요에 맞는 적절한 솔루션을 선택하는 데 도움이 되는 방법은 아래 링크를 참조하십시오.</p>
<ul>
<li><a href="https://aws.amazon.com/blogs/containers/policy-based-countermeasures-for-kubernetes-part-1/"> 쿠버네티스에 대한 정책 기반 대책 - 1부 </a></li>
<li><a href="https://aws.amazon.com/blogs/containers/policy-based-countermeasures-for-kubernetes-part-2/"> 쿠버네티스를 위한 정책 기반 대책 – 2부 </a></li>
</ul>
<h3 id="pss-psa">포드 보안 표준(PSS) 및 포드 보안 승인(PSA)<a class="headerlink" href="#pss-psa" title="Permanent link">&para;</a></h3>
<p>PSP 지원 중단 및 기본 제공 Kubernetes 솔루션을 사용하여 즉시 사용 가능한 포드 보안을 제어해야 하는 지속적인 필요성에 대응하여 Kubernetes <a href="https://github.com/kubernetes/community /tree/master/sig-auth"> Auth Special Interest Group </a>는 <a href="https://kubernetes.io/docs/concepts/security/pod-security-standards/"> 포드 보안 표준(PSS) </a> 및 [ 포드 보안 승인(PSA) ] 을 만들었습니다. ( https://kubernetes.io/docs/concepts/security/pod-security-admission/ ). PSA 노력에는 PSS에 정의된 컨트롤을 구현 하는 <a href="https://github.com/kubernetes/pod-security-admission#pod-security-admission"> 허용 컨트롤러 웹후크 프로젝트 </a>가 포함됩니다. 이 허용 컨트롤러 접근 방식은 PAC 솔루션에서 사용되는 방식과 유사합니다.</p>
<p>Kubernetes 설명서에 따르면 PSS는 <em>"보안 스펙트럼을 광범위하게 포괄하는 세 가지 다른 정책을 정의합니다. 이러한 정책은 누적되며 매우 허용적인 것부터 매우 제한적인 것까지 다양합니다."</em> </p>
<p>이러한 정책은 다음과 같이 정의됩니다.</p>
<ul>
<li>
<p><strong>Privileged:</strong> 제한되지 않은(보안되지 않은) 정책으로 가능한 가장 광범위한 수준의 권한을 제공합니다. 이 정책은 알려진 권한 에스컬레이션을 허용합니다. 정책의 부재입니다. 이는 로깅 에이전트, CNI, 스토리지 드라이버 및 권한 있는 액세스가 필요한 기타 시스템 전체 애플리케이션과 같은 애플리케이션에 적합합니다.</p>
</li>
<li>
<p><strong>기준:</strong> 알려진 권한 에스컬레이션을 방지하는 최소 제한 정책입니다. 기본(최소 지정) 포드 구성을 허용합니다. 기본 정책은 hostNetwork, hostPID, hostIPC, hostPath, hostPort의 사용, Linux 기능 추가 불가 및 기타 몇 가지 제한 사항을 금지합니다.</p>
</li>
<li>
<p><strong>제한됨:</strong> 현재 포드 강화 모범 사례에 따라 엄격하게 제한된 정책입니다. 이 정책은 기준선에서 상속되며 루트 또는 루트 그룹으로 실행할 수 없는 것과 같은 추가 제한 사항을 추가합니다. 제한된 정책은 애플리케이션의 기능에 영향을 미칠 수 있습니다. 이들은 주로 보안에 중요한 응용 프로그램을 실행하는 것을 목표로 합니다.</p>
</li>
</ul>
<p>이러한 정책은 <a href="https://kubernetes.io/docs/concepts/security/pod-security-standards/#profile-details"> 파드 실행을 위한 프로파일 </a>을 정의하며, 세 가지 수준의 특권 액세스와 제한된 액세스로 정렬됩니다.</p>
<p>PSS에서 정의한 컨트롤을 구현하기 위해 PSA는 세 가지 모드로 작동합니다.</p>
<ul>
<li>
<p><strong>enforce:</strong> 정책을 위반하면 포드가 거부됩니다.</p>
</li>
<li>
<p><strong>감사:</strong> 정책 위반은 감사 로그에 기록된 이벤트에 대한 감사 주석 추가를 트리거하지만 그렇지 않으면 허용됩니다.</p>
</li>
<li>
<p><strong>경고:</strong> 정책을 위반하면 사용자에게 경고가 표시되지만 그렇지 않으면 허용됩니다.</p>
</li>
</ul>
<p>이러한 모드와 프로필(제한) 수준은 아래 예와 같이 레이블을 사용하여 Kubernetes 네임스페이스 수준에서 구성됩니다.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="nt">api버전 </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">v1</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="nt">종류 </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">네임스페이스</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="nt">메타데이터 </span><span class="p">:</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="w">  </span><span class="nt">이름 </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">정책 테스트</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="w">  </span><span class="nt">라벨 </span><span class="p">:</span>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="w">    </span><span class="nt">pod-security.kubernetes.io/enforce </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">제한됨</span>
</code></pre></div>
<p>독립적으로 사용하는 경우 이러한 작동 모드는 다른 사용자 경험을 제공하는 다른 응답을 갖습니다. <em>enforce</em> 모드는 각 podSpec이 구성된 제한 수준을 위반하는 경우 포드가 생성되지 않도록 합니다. 그러나 이 모드에서는 PodSpec이 적용된 PSS를 위반하더라도 배포와 같이 포드를 생성하는 포드가 아닌 Kubernetes 개체가 클러스터에 적용되는 것을 방지하지 않습니다. 이 경우 배포가 적용되지만 포드는 적용되지 않습니다.</p>
<p>성공적으로 적용된 배포 개체가 포드 생성 실패에 속한다는 즉각적인 표시가 없기 때문에 이것은 어려운 사용자 경험입니다. 잘못된 podSpec은 포드를 생성하지 않습니다. <code>kubectl get deploy &lt;DEPLOYMENT_NAME&gt; -oyaml</code> 을 사용하여 배포 리소스를 검사하면 아래와 같이 실패한 포드 <code>.status.conditions</code> 요소의 메시지가 노출됩니다.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="nn">...</span>
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="nt">상태 </span><span class="p">:</span>
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="w">  </span><span class="nt">조건 </span><span class="p">:</span>
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">lastTransitionTime </span><span class="p">:</span><span class="w"> </span><span class="s">&quot;2022-01-20T01:02:08Z&quot;</span>
<a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a><span class="w">      </span><span class="nt">lastUpdateTime </span><span class="p">:</span><span class="w"> </span><span class="s">&quot;2022-01-20T01:02:08Z&quot;</span>
<a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a><span class="w">      </span><span class="nt">메시지 </span><span class="p">:</span><span class="w"> </span><span class="s">&#39;pods</span><span class="nv"> </span><span class="s">&quot;test-688f68dc87-tw587&quot;이</span><span class="nv"> </span><span class="s">금지됨:</span><span class="nv"> </span><span class="s">PodSecurity</span><span class="nv"> </span><span class="s">&quot;restricted:latest&quot;를</span><span class="nv"> </span><span class="s">위반함:</span>
<a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a><span class="s">allowPrivilegeEscalation</span><span class="nv"> </span><span class="s">!=</span><span class="nv"> </span><span class="s">false(컨테이너</span><span class="nv"> </span><span class="s">&quot;테스트&quot;는</span><span class="nv"> </span><span class="s">securityContext.allowPrivilegeEscalation=false로</span><span class="nv"> </span><span class="s">설정해야</span><span class="nv"> </span><span class="s">함),</span>
<a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a><span class="s">무제한</span><span class="nv"> </span><span class="s">기능(컨테이너</span><span class="nv"> </span><span class="s">&quot;테스트&quot;는</span><span class="nv"> </span><span class="s">securityContext.capabilities.drop=[&quot;ALL&quot;]을</span><span class="nv"> </span><span class="s">설정해야</span><span class="nv"> </span><span class="s">함),</span>
<a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a><span class="s">runAsNonRoot</span><span class="nv"> </span><span class="s">!=</span><span class="nv"> </span><span class="s">true(포드</span><span class="nv"> </span><span class="s">또는</span><span class="nv"> </span><span class="s">컨테이너</span><span class="nv"> </span><span class="s">&quot;테스트&quot;는</span><span class="nv"> </span><span class="s">securityContext.runAsNonRoot=true로</span><span class="nv"> </span><span class="s">설정해야</span><span class="nv"> </span><span class="s">함),</span>
<a id="__codelineno-1-10" name="__codelineno-1-10" href="#__codelineno-1-10"></a><span class="s">seccompProfile(포드</span><span class="nv"> </span><span class="s">또는</span><span class="nv"> </span><span class="s">컨테이너</span><span class="nv"> </span><span class="s">&quot;테스트&quot;는</span><span class="nv"> </span><span class="s">securityContext.seccompProfile.type을</span><span class="nv"> </span><span class="s">설정해야</span><span class="nv"> </span><span class="s">합니다.</span>
<a id="__codelineno-1-11" name="__codelineno-1-11" href="#__codelineno-1-11"></a><span class="s">&quot;RuntimeDefault&quot;</span><span class="nv"> </span><span class="s">또는</span><span class="nv"> </span><span class="s">&quot;Localhost&quot;로)&#39;</span>
<a id="__codelineno-1-12" name="__codelineno-1-12" href="#__codelineno-1-12"></a><span class="w">      </span><span class="nt">이유 </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">FailedCreate</span>
<a id="__codelineno-1-13" name="__codelineno-1-13" href="#__codelineno-1-13"></a><span class="w">      </span><span class="nt">상태 </span><span class="p">:</span><span class="w"> </span><span class="s">&quot;참&quot;</span>
<a id="__codelineno-1-14" name="__codelineno-1-14" href="#__codelineno-1-14"></a><span class="w">      </span><span class="nt">유형 </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ReplicaFailure</span>
<a id="__codelineno-1-15" name="__codelineno-1-15" href="#__codelineno-1-15"></a><span class="nn">...</span>
</code></pre></div>
<p><em>audit</em> 및 <em>warn</em> 모드에서 포드 제한은 위반 포드가 생성되고 시작되는 것을 막지 않습니다 . 그러나 이러한 모드에서는 API 서버 감사 로그 이벤트에 대한 감사 주석 및 API 서버 클라이언트에 대한 경고(예: <em>kubectl</em> )는 pod와 pod를 생성하는 개체에 위반이 있는 podSpec이 포함되어 있을 때 각각 트리거됩니다. <code>kubectl</code> <em>경고</em> 메시지는 아래와 같습니다.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a>경고: PodSecurity &quot;restricted:latest&quot; 위반 : allowPrivilegeEscalation != false (컨테이너 &quot;테스트&quot; 는 securityContext.allowPrivilegeEscalation=false를 설정 해야 함), 무제한 기능(컨테이너 &quot;테스트&quot; 는 securityContext.capabilities.drop=[ &quot;ALL&quot; ] 을 설정 해야 함) , runAsNonRoot != true (팟 또는 컨테이너 &quot;테스트&quot; 는 securityContext.runAsNonRoot=true 로 설정 해야 함), seccompProfile(팟 또는 컨테이너 &quot;테스트&quot; 는 securityContext.seccompProfile.type을 &quot;RuntimeDefault&quot; 또는 &quot;Localhost&quot; 로 설정 해야 함)
<a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a>deployment.apps/test 생성됨
</code></pre></div>
<p>PSA <em>audit</em> 및 <em>warn</em> 모드는 클러스터 작업에 부정적인 영향을 주지 않고 PSS를 도입할 때 유용합니다.</p>
<p>PSA 작동 모드는 상호 배타적이지 않으며 누적 방식으로 사용할 수 있습니다. 아래에서 볼 수 있듯이 단일 네임스페이스에서 여러 모드를 구성할 수 있습니다.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="nt">api버전 </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">v1</span>
<a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a><span class="nt">종류 </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">네임스페이스</span>
<a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a><span class="nt">메타데이터 </span><span class="p">:</span>
<a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a><span class="w">  </span><span class="nt">이름 </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">정책 테스트</span>
<a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a><span class="w">  </span><span class="nt">라벨 </span><span class="p">:</span>
<a id="__codelineno-3-6" name="__codelineno-3-6" href="#__codelineno-3-6"></a><span class="w">    </span><span class="nt">pod-security.kubernetes.io/audit </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">제한됨</span>
<a id="__codelineno-3-7" name="__codelineno-3-7" href="#__codelineno-3-7"></a><span class="w">    </span><span class="nt">pod-security.kubernetes.io/enforce </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">제한됨</span>
<a id="__codelineno-3-8" name="__codelineno-3-8" href="#__codelineno-3-8"></a><span class="w">    </span><span class="nt">pod-security.kubernetes.io/warn </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">제한됨</span>
</code></pre></div>
<p>위의 예에서 배포를 적용할 때 사용자에게 친숙한 경고 및 감사 주석이 제공되는 반면 위반 적용도 포드 수준에서 제공됩니다. 실제로 여러 PSA 레이블은 아래와 같이 서로 다른 프로필 수준을 사용할 수 있습니다.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="nt">api버전 </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">v1</span>
<a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a><span class="nt">종류 </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">네임스페이스</span>
<a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a><span class="nt">메타데이터 </span><span class="p">:</span>
<a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a><span class="w">  </span><span class="nt">이름 </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">정책 테스트</span>
<a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a><span class="w">  </span><span class="nt">라벨 </span><span class="p">:</span>
<a id="__codelineno-4-6" name="__codelineno-4-6" href="#__codelineno-4-6"></a><span class="w">    </span><span class="nt">pod-security.kubernetes.io/enforce </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">기준선</span>
<a id="__codelineno-4-7" name="__codelineno-4-7" href="#__codelineno-4-7"></a><span class="w">    </span><span class="nt">pod-security.kubernetes.io/warn </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">제한됨</span>
</code></pre></div>
<p>위의 예에서 PSA는 <em>baseline</em> 프로필 수준을 충족하는 모든 포드의 생성을 허용한 다음 <em>restricted</em> 프로필 수준 을 위반하는 포드(및 포드를 생성하는 개체)에서 <em>warn</em> 하도록 구성됩니다. 이는 <em>baseline</em> 에서 <em>restricted</em> 프로필로 변경할 때 가능한 영향을 확인하는 데 유용한 접근 방식입니다.</p>
<h4 id="_6">기존 포드<a class="headerlink" href="#_6" title="Permanent link">&para;</a></h4>
<p>기존 포드가 있는 네임스페이스가 더 제한적인 PSS 프로필을 사용하도록 수정되면 <em>audit</em> 및 <em>warn</em> 모드가 적절한 메시지를 생성합니다. 그러나 <em>enforce</em> 모드는 포드를 삭제하지 않습니다. 경고 메시지는 아래와 같습니다.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a>경고: &quot;policy-test&quot; 네임스페이스 의 기존 포드 가 새로운 PodSecurity 적용 수준 &quot;restricted:latest&quot; 를 위반합니다.
<a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a>경고: test-688f68dc87-htm8x: allowPrivilegeEscalation != false, 무제한 기능, runAsNonRoot != true, seccompProfile
<a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a>네임스페이스/정책 테스트 구성됨
</code></pre></div>
<h4 id="_7">면제<a class="headerlink" href="#_7" title="Permanent link">&para;</a></h4>
<p>PSA는 <em>Exemptions</em> 를 사용하여 달리 적용되었을 포드에 대한 위반 집행을 제외합니다. 이러한 면제는 아래에 나열되어 있습니다.</p>
<ul>
<li>
<p><strong>사용자 이름:</strong> 면제된 인증(또는 사칭) 사용자 이름을 가진 사용자의 요청은 무시됩니다.</p>
</li>
<li>
<p><strong>RuntimeClassNames:</strong> 면제 런타임 클래스 이름을 지정하는 포드 및 워크로드 리소스는 무시됩니다.</p>
</li>
<li>
<p><strong>네임스페이스:</strong> 면제 네임스페이스의 포드 및 워크로드 리소스는 무시됩니다.</p>
</li>
</ul>
<p>이러한 면제는 <a href="https://kubernetes.io/docs/tasks/configure-pod-container/enforce-standards-admission-controller/#configure-the-admission-controller"> PSA 허용 컨트롤러 구성 </a>에서 다음과 같이 정적으로 적용됩니다. API 서버 구성의 일부입니다.</p>
<p><em>Validating Webhook</em> 구현에서 예외는 Kubernetes <a href="https://github.com/kubernetes/pod-security-admission/blob/master/webhook/manifests/20-configmap.yaml"> ConfigMap </a> 리소스 내에서 구성할 수 있습니다. <a href="https://github.com/kubernetes/pod-security-admission/blob/master/webhook/manifests/50-deployment.yaml"> pod-security-webhook </a> 컨테이너 에 볼륨으로 마운트됩니다 .</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="nt">api버전 </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">v1</span>
<a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a><span class="nt">종류 </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">컨피그맵</span>
<a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a><span class="nt">메타데이터 </span><span class="p">:</span>
<a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a><span class="w">  </span><span class="nt">이름 </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">팟-보안-웹후크</span>
<a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a><span class="w">  </span><span class="nt">네임스페이스 </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pod-security-webhook</span>
<a id="__codelineno-6-6" name="__codelineno-6-6" href="#__codelineno-6-6"></a><span class="nt">데이터 </span><span class="p">:</span>
<a id="__codelineno-6-7" name="__codelineno-6-7" href="#__codelineno-6-7"></a><span class="w">  </span><span class="nt">podsecurityconfiguration.yaml </span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
<a id="__codelineno-6-8" name="__codelineno-6-8" href="#__codelineno-6-8"></a><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pod-security.admission.config.k8s.io/v1beta1</span>
<a id="__codelineno-6-9" name="__codelineno-6-9" href="#__codelineno-6-9"></a><span class="nt">종류</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">PodSecurityConfiguration</span>
<a id="__codelineno-6-10" name="__codelineno-6-10" href="#__codelineno-6-10"></a><span class="nt">기본값</span><span class="p">:</span>
<a id="__codelineno-6-11" name="__codelineno-6-11" href="#__codelineno-6-11"></a><span class="nt">적용</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;제한됨&quot;</span>
<a id="__codelineno-6-12" name="__codelineno-6-12" href="#__codelineno-6-12"></a><span class="nt">시행 버전</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;최신&quot;</span>
<a id="__codelineno-6-13" name="__codelineno-6-13" href="#__codelineno-6-13"></a><span class="nt">감사</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;제한됨&quot;</span>
<a id="__codelineno-6-14" name="__codelineno-6-14" href="#__codelineno-6-14"></a><span class="nt">감사 버전</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;최신&quot;</span>
<a id="__codelineno-6-15" name="__codelineno-6-15" href="#__codelineno-6-15"></a><span class="nt">경고</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;제한됨&quot;</span>
<a id="__codelineno-6-16" name="__codelineno-6-16" href="#__codelineno-6-16"></a><span class="nt">경고 버전</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;최신&quot;</span>
<a id="__codelineno-6-17" name="__codelineno-6-17" href="#__codelineno-6-17"></a><span class="nt">면제</span><span class="p">:</span>
<a id="__codelineno-6-18" name="__codelineno-6-18" href="#__codelineno-6-18"></a><span class="c1"># 면제할 인증된 사용자 이름의 배열.</span>
<a id="__codelineno-6-19" name="__codelineno-6-19" href="#__codelineno-6-19"></a><span class="nt">사용자 이름</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[]</span>
<a id="__codelineno-6-20" name="__codelineno-6-20" href="#__codelineno-6-20"></a><span class="c1"># 면제할 런타임 클래스 이름의 배열.</span>
<a id="__codelineno-6-21" name="__codelineno-6-21" href="#__codelineno-6-21"></a><span class="nt">런타임 클래스</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[]</span>
<a id="__codelineno-6-22" name="__codelineno-6-22" href="#__codelineno-6-22"></a><span class="c1"># 면제할 네임스페이스 배열.</span>
<a id="__codelineno-6-23" name="__codelineno-6-23" href="#__codelineno-6-23"></a><span class="nt">네임스페이스</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;kube-system&quot;</span><span class="p p-Indicator">,</span><span class="s">&quot;policy-test1&quot;</span><span class="p p-Indicator">]</span>
</code></pre></div>
<p>위의 ConfigMap YAML에서 볼 수 있듯이 클러스터 전체의 기본 PSS 수준은 모든 PSA 모드, <em>audit</em> , <em>enforce</em> 및 <em>warn</em> 에 대해 <em>restricted</em> 로 설정되었습니다 . 이는 예외인 <code>namespaces: ["kube-system","policy-test1"]</code> 을 제외한 모든 네임스페이스에 영향을 미칩니다 . 또한 아래에 표시된 <em>ValidatingWebhookConfiguration</em> 리소스에서 <em>pod-security-webhook</em> 네임스페이스도 구성된 PSS에서 제외됩니다.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="nn">...</span>
<a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a><span class="nt">웹후크 </span><span class="p">:</span>
<a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a><span class="w">  </span><span class="c1"># 감사 주석에는 이 이름이 접두사로 붙습니다.</span>
<a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">이름 </span><span class="p">:</span><span class="w"> </span><span class="s">&quot;pod-security-webhook.kubernetes.io&quot;</span>
<a id="__codelineno-7-5" name="__codelineno-7-5" href="#__codelineno-7-5"></a><span class="w">    </span><span class="c1"># 페일클로즈 승인 웹후크는 운영상 문제를 일으킬 수 있습니다.</span>
<a id="__codelineno-7-6" name="__codelineno-7-6" href="#__codelineno-7-6"></a><span class="w">    </span><span class="c1"># 무시 실패 정책을 사용하는 것을 고려할 수 있지만</span>
<a id="__codelineno-7-7" name="__codelineno-7-7" href="#__codelineno-7-7"></a><span class="w">    </span><span class="c1"># 보안 장단점을 고려하십시오.</span>
<a id="__codelineno-7-8" name="__codelineno-7-8" href="#__codelineno-7-8"></a><span class="w">    </span><span class="nt">failurePolicy </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">실패</span>
<a id="__codelineno-7-9" name="__codelineno-7-9" href="#__codelineno-7-9"></a><span class="w">    </span><span class="nt">네임스페이스 선택기 </span><span class="p">:</span>
<a id="__codelineno-7-10" name="__codelineno-7-10" href="#__codelineno-7-10"></a><span class="w">      </span><span class="c1"># 순환 종속성을 피하기 위해 webhook 자체를 면제합니다.</span>
<a id="__codelineno-7-11" name="__codelineno-7-11" href="#__codelineno-7-11"></a><span class="w">      </span><span class="nt">일치 표현 </span><span class="p">:</span>
<a id="__codelineno-7-12" name="__codelineno-7-12" href="#__codelineno-7-12"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">키 </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">kubernetes.io/metadata.name</span>
<a id="__codelineno-7-13" name="__codelineno-7-13" href="#__codelineno-7-13"></a><span class="w">          </span><span class="l l-Scalar l-Scalar-Plain">연산자</span><span class="w"> </span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">NotIn</span>
<a id="__codelineno-7-14" name="__codelineno-7-14" href="#__codelineno-7-14"></a><span class="w">          </span><span class="l l-Scalar l-Scalar-Plain">값</span><span class="w"> </span><span class="p p-Indicator">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="w"> </span><span class="s">&quot;pod-security-webhook&quot;</span><span class="w"> </span><span class="p p-Indicator">]</span>
<a id="__codelineno-7-15" name="__codelineno-7-15" href="#__codelineno-7-15"></a><span class="nn">...</span>
</code></pre></div>
<div class="admonition 주목">
<p class="admonition-title">주목</p>
</div>
<p>Kubernetes 버전 <em>1.22</em> 및 <em>1.23_에서 포드 보안 승인 기능은 각각 _alpha</em> 및 <em>beta</em> 상태입니다. 적어도 GA까지는 <a href="https://github.com/kubernetes/pod-security-admission/tree/master/webhook">이 지침</a>에서 구성된 검증 웹훅을 통해 현재 허용 컨트롤러를 사용할 수 있습니다.</p>
<h3 id="policy-as-code-pod">Policy-as-Code와 Pod 보안 표준 중에서 선택<a class="headerlink" href="#policy-as-code-pod" title="Permanent link">&para;</a></h3>
<p>포드 보안 표준(PSS)은 쿠버네티스에 내장되어 있고 쿠버네티스 에코시스템의 솔루션이 필요하지 않은 솔루션을 제공함으로써 포드 보안 정책(PSP)을 대체하기 위해 개발되었습니다. PAC(Policy-as-Code) 솔루션은 훨씬 더 유연합니다.</p>
<p>다음 장단점 목록은 팟(Pod) 보안 솔루션에 대해 정보에 입각한 결정을 내리는 데 도움이 되도록 설계되었습니다.</p>
<p><strong>Policy-as-code(Policy-as-code(포드 보안 표준과 비교)</strong></p>
<p>장점:</p>
<ul>
<li>보다 유연하고 세분화됨(필요한 경우 리소스 속성까지)</li>
<li>포드에만 집중하는 것이 아니라 다양한 리소스 및 작업에 사용할 수 있습니다.</li>
<li>네임스페이스 수준에서만 적용되지 않음</li>
<li>포드 보안 표준보다 더 성숙함</li>
<li>의사결정은 기존 클러스터 리소스 및 외부 데이터(솔루션에 따라 다름)뿐만 아니라 API 서버 요청 페이로드의 모든 항목을 기반으로 할 수 있습니다.</li>
<li>유효성 검사 전에 API 서버 요청 변경 지원(솔루션에 따라 다름)</li>
<li>보완 정책 및 Kubernetes 리소스 생성 가능(솔루션에 따라 다름 - Pod 정책 에서 Kyverno 는 배포. Kyverno는 또한 <a href="https://kyverno.io/docs/writing-policies/generate/"> Generate Rules </a>를 사용하여 <em>"새 리소스가 생성되거나 소스가 업데이트될 때"</em> 추가 Kubernetes 리소스를 생성할 수 있습니다 . )</li>
<li>Kubernetes API 서버를 호출하기 전에 CICD 파이프라인으로 왼쪽으로 이동하는 데 사용할 수 있습니다(솔루션에 따라 다름).</li>
<li>모범 사례, 조직 표준 등과 같이 반드시 보안과 관련되지 않은 동작을 구현하는 데 사용할 수 있습니다.</li>
<li>Kubernetes 이외의 사용 사례에서 사용 가능(솔루션에 따라 다름)</li>
<li>유연성으로 인해 사용자 경험을 사용자의 요구에 맞게 조정할 수 있습니다.</li>
</ul>
<p>단점:</p>
<ul>
<li>Kubernetes에 내장되지 않음</li>
<li>학습, 구성 및 지원이 더 복잡함</li>
<li>정책 작성에는 새로운 기술/언어/기능이 필요할 수 있습니다.</li>
</ul>
<p><strong>Pod 보안 승인(Policy-as-Code와 비교)</strong></p>
<p>장점:</p>
<ul>
<li>쿠버네티스에 내장</li>
<li>더 간단한 구성</li>
<li>사용할 새로운 언어나 작성할 정책이 없습니다.</li>
<li>클러스터 기본 승인 수준이 <em>privileged</em> 로 구성된 경우 네임스페이스 레이블을 사용하여 포드 보안 프로필에 네임스페이스를 옵트인할 수 있습니다.</li>
</ul>
<p>단점:</p>
<ul>
<li>Policy-as-Code만큼 유연하거나 세분화되지 않음</li>
<li>단 3단계 제한</li>
<li>주로 포드에 집중</li>
</ul>
<h4 id="_8">요약<a class="headerlink" href="#_8" title="Permanent link">&para;</a></h4>
<p>현재 PSP 외에 포드 보안 솔루션이 없고 필요한 포드 보안 상태가 포드 보안 표준(PSS)에 정의된 모델에 맞는 경우 정책 대신 PSS를 채택하는 것이 더 쉬운 경로일 수 있습니다. 코드 솔루션. 그러나 팟(Pod) 보안 상태가 PSS 모델에 적합하지 않거나 PSS에서 정의한 것 이상으로 추가 제어를 추가하려는 경우 코드형 정책 솔루션이 더 적합해 보입니다.</p>
<h2 id="_9">추천<a class="headerlink" href="#_9" title="Permanent link">&para;</a></h2>
<h3 id="psapod-security-admission">더 나은 사용자 경험을 위해 여러 PSA(Pod Security Admission) 모드 사용<a class="headerlink" href="#psapod-security-admission" title="Permanent link">&para;</a></h3>
<p>앞서 언급했듯이 PSA <em>enforce</em> 모드는 PSS 위반이 있는 포드가 적용되는 것을 방지하지만 배포와 같은 상위 수준 컨트롤러를 중지하지는 않습니다. 실제로 포드 적용에 실패했다는 표시 없이 배포가 성공적으로 적용됩니다. <em>kubectl</em> 을 사용 하여 배포 개체를 검사하고 PSA에서 실패한 포드 메시지를 검색할 수 있지만 사용자 경험이 더 좋을 수 있습니다. 사용자 경험을 개선하려면 여러 PSA 모드(감사, 시행, 경고)를 사용해야 합니다.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="nt">api버전 </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">v1</span>
<a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a><span class="nt">종류 </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">네임스페이스</span>
<a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a><span class="nt">메타데이터 </span><span class="p">:</span>
<a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a><span class="w">  </span><span class="nt">이름 </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">정책 테스트</span>
<a id="__codelineno-8-5" name="__codelineno-8-5" href="#__codelineno-8-5"></a><span class="w">  </span><span class="nt">라벨 </span><span class="p">:</span>
<a id="__codelineno-8-6" name="__codelineno-8-6" href="#__codelineno-8-6"></a><span class="w">    </span><span class="nt">pod-security.kubernetes.io/audit </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">제한됨</span>
<a id="__codelineno-8-7" name="__codelineno-8-7" href="#__codelineno-8-7"></a><span class="w">    </span><span class="nt">pod-security.kubernetes.io/enforce </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">제한됨</span>
<a id="__codelineno-8-8" name="__codelineno-8-8" href="#__codelineno-8-8"></a><span class="w">    </span><span class="nt">pod-security.kubernetes.io/warn </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">제한됨</span>
</code></pre></div>
<p>위의 예에서 <em>enforce</em> 모드가 정의된 경우 각 podSpec에서 PSS 위반이 있는 배포 매니페스트를 Kubernetes API 서버에 적용하려고 하면 배포가 성공적으로 적용되지만 포드는 적용되지 않습니다. 그리고 <em>audit</em> 및 <em>warn</em> 모드도 활성화되어 있으므로 API 서버 클라이언트는 경고 메시지를 수신하고 API 서버 감사 로그 이벤트에도 메시지가 표시됩니다.</p>
<h3 id="_10">권한 있는 권한으로 실행할 수 있는 컨테이너 제한<a class="headerlink" href="#_10" title="Permanent link">&para;</a></h3>
<p>언급한 바와 같이 권한이 있는 상태로 실행되는 컨테이너는 호스트의 루트에 할당된 모든 Linux 기능을 상속합니다. 컨테이너가 제대로 작동하기 위해 이러한 유형의 권한이 필요한 경우는 거의 없습니다. 컨테이너의 권한과 기능을 제한하는 데 사용할 수 있는 여러 가지 방법이 있습니다.</p>
<div class="admonition 주목">
<p class="admonition-title">주목</p>
</div>
<p>Fargate는 포드의 컨테이너가 AWS가 관리하는 인프라에서 실행되는 "서버리스" 컨테이너를 실행할 수 있게 해주는 시작 유형입니다. Fargate를 사용하면 권한 있는 컨테이너를 실행하거나 hostNetwork 또는 hostPort를 사용하도록 포드를 구성할 수 없습니다.</p>
<h3 id="_11">컨테이너에서 루트로 프로세스를 실행하지 마십시오.<a class="headerlink" href="#_11" title="Permanent link">&para;</a></h3>
<p>모든 컨테이너는 기본적으로 루트로 실행됩니다. 이는 공격자가 애플리케이션의 취약성을 악용하고 실행 중인 컨테이너에 대한 셸 액세스 권한을 얻을 수 있는 경우 문제가 될 수 있습니다. 다양한 방법으로 이 위험을 완화할 수 있습니다. 먼저 컨테이너 이미지에서 셸을 제거합니다. 둘째, Dockerfile에 USER 지시문을 추가하거나 루트가 아닌 사용자로 포드의 컨테이너를 실행합니다. Kubernetes podSpec에는 <code>spec.securityContext</code> 아래에 애플리케이션을 실행할 사용자 및/또는 그룹을 지정할 수 있는 일련의 필드가 포함되어 있습니다. 이러한 필드는 각각 <code>runAsUser</code> 및 <code>runAsGroup</code> 입니다.</p>
<p><code>spec.securityContext</code> 및 관련 요소 의 사용을 강제하기 위해 코드로서의 정책 또는 포드 보안 표준을 클러스터에 추가할 수 있습니다. 이러한 솔루션을 사용하면 etcd에 유지되기 전에 인바운드 Kubernetes API 서버 요청 페이로드를 검증할 수 있는 정책 또는 프로필을 작성 및/또는 사용할 수 있습니다. 또한 코드형 정책 솔루션은 인바운드 요청을 변경하고 경우에 따라 새 요청을 생성할 수 있습니다.</p>
<h3 id="docker-docker">Docker에서 Docker를 실행하거나 컨테이너에 소켓을 마운트하지 마십시오.<a class="headerlink" href="#docker-docker" title="Permanent link">&para;</a></h3>
<p>이렇게 하면 편리하게 Docker 컨테이너에서 이미지를 빌드/실행할 수 있지만 기본적으로 컨테이너에서 실행 중인 프로세스에 대한 노드의 완전한 제어를 양도하는 것입니다. Kubernetes에서 컨테이너 이미지를 빌드해야 하는 경우 <a href="https://github.com/GoogleContainerTools/kaniko"> Kaniko </a>, <a href="https://github.com/containers/buildah"> buildah </a>, <a href="https: //github.com/genuinetools/img"> img </a> 또는 <a href="https://docs.aws.amazon.com/codebuild/latest/userguide/welcome.html"> CodeBuild </a> 같은 빌드 서비스 를 대신 사용할 수 있습니다.</p>
<div class="admonition 팁">
<p class="admonition-title">팁</p>
</div>
<p>컨테이너 이미지 빌드와 같은 CICD 처리에 사용되는 Kubernetes 클러스터는 보다 일반화된 워크로드를 실행하는 클러스터와 격리되어야 합니다.</p>
<h3 id="hostpath-hostpath">hostPath 사용을 제한하거나 hostPath가 필요한 경우 사용할 수 있는 접두사를 제한하고 볼륨을 읽기 전용으로 구성합니다.<a class="headerlink" href="#hostpath-hostpath" title="Permanent link">&para;</a></h3>
<p><code>hostPath</code> 는 호스트에서 컨테이너로 직접 디렉토리를 마운트하는 볼륨입니다. 포드에 이러한 유형의 액세스가 필요한 경우는 거의 없지만 필요한 경우 위험을 인식해야 합니다. 기본적으로 루트로 실행되는 포드는 hostPath에 의해 노출된 파일 시스템에 대한 쓰기 액세스 권한을 갖습니다. 이를 통해 공격자는 kubelet 설정을 수정하고, /etc/shadow와 같이 hostPath에 의해 직접 노출되지 않는 디렉토리 또는 파일에 대한 심볼릭 링크를 생성하고, ssh 키를 설치하고, 호스트에 마운트된 비밀을 읽고, 기타 악의적인 것들을 할 수 있습니다. hostPath의 위험을 완화하려면 <code>spec.containers.volumeMounts</code> 를 <code>readOnly</code> 로 구성하십시오 . 예를 들면 다음과 같습니다.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="nt">볼륨 마운트 </span><span class="p">:</span>
<a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">이름 </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">hostPath-볼륨</span>
<a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a><span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">읽기 전용</span><span class="w"> </span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">참</span>
<a id="__codelineno-9-4" name="__codelineno-9-4" href="#__codelineno-9-4"></a><span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">mountPath</span><span class="w"> </span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/호스트 경로</span>
</code></pre></div>
<p>또한 정책 코드 솔루션을 사용하여 <code>hostPath</code> 볼륨에서 사용할 수 있는 디렉토리를 제한하거나 <code>hostPath</code> 사용을 모두 방지해야 합니다. 포드 보안 표준 <em>Baseline</em> 또는 <em>Restricted</em> 정책을 사용하여 <code>hostPath</code> 사용을 방지할 수 있습니다 .</p>
<p>권한 상승의 위험성에 대한 자세한 내용은 Seth Art의 블로그 <a href="https://labs.bishopfox.com/tech-blog/bad-pods-kubernetes-pod-privilege-escalation"> Bad Pods: Kubernetes Pod Privilege Escalation </a> 를 참조하십시오. .</p>
<h3 id="dos">리소스 경합 및 DoS 공격을 피하기 위해 각 컨테이너에 대한 요청 및 제한 설정<a class="headerlink" href="#dos" title="Permanent link">&para;</a></h3>
<p>요청이나 제한이 없는 포드는 이론적으로 호스트에서 사용 가능한 모든 리소스를 소비할 수 있습니다. 추가 포드가 노드에 예약되면 노드에서 CPU 또는 메모리 압력이 발생하여 Kubelet이 종료되거나 노드에서 포드가 제거될 수 있습니다. 이러한 일이 함께 발생하는 것을 방지할 수는 없지만 요청 및 제한을 설정하면 리소스 경합을 최소화하고 리소스를 과도하게 소비하는 잘못 작성된 애플리케이션으로 인한 위험을 완화하는 데 도움이 됩니다.</p>
<p><code>podSpec</code> 을 사용하면 CPU 및 메모리에 대한 요청 및 제한을 지정할 수 있습니다. CPU는 초과 신청될 수 있기 때문에 압축 가능한 리소스로 간주됩니다. 메모리는 압축할 수 없습니다. 즉, 여러 컨테이너 간에 공유할 수 없습니다.</p>
<p>CPU 또는 메모리에 대해 <em>requests</em> 를 지정할 때 본질적으로 컨테이너가 확보할 수 있는 <em>memory</em> 의 양을 지정하는 것입니다. Kubernetes는 포드에 있는 모든 컨테이너의 요청을 집계하여 포드를 예약할 노드를 결정합니다. 컨테이너가 요청된 메모리 양을 초과하면 노드에 메모리 압력이 있으면 종료될 수 있습니다.</p>
<p><em>Limits</em> 는 컨테이너가 사용할 수 있는 CPU 및 메모리 리소스의 최대량이며 컨테이너에 대해 생성된 cgroup 의 <code>memory.limit_in_bytes</code> 값에 직접 해당합니다. 메모리 제한을 초과하는 컨테이너는 OOM 종료됩니다. 컨테이너가 CPU 제한을 초과하면 제한됩니다.</p>
<div class="admonition 팁">
<p class="admonition-title">팁</p>
</div>
<p>컨테이너 <code>resources.limits</code>를 사용하는 경우 컨테이너 리소스 사용량(리소스 풋프린트라고도 함)은 부하 테스트를 기반으로 데이터 기반이고 정확해야 합니다. 정확하고 신뢰할 수 있는 리소스 공간이 없으면 컨테이너 'resources.limits'를 채울 수 있습니다. 예를 들어 'resources.limits.memory'는 잠재적인 메모리 리소스 제한 부정확성을 설명하기 위해 관찰 가능한 최대값보다 20-30% 높게 패딩될 수 있습니다.</p>
<p>Kubernetes는 세 가지 서비스 품질(QoS) 클래스를 사용하여 노드에서 실행되는 워크로드의 우선 순위를 지정합니다. 여기에는 다음이 포함됩니다.</p>
<ul>
<li>보장</li>
<li>파열 가능</li>
<li>최선의 노력</li>
</ul>
<p>제한 및 요청이 설정되지 않은 경우 포드는 <em>best-effort</em> (가장 낮은 우선 순위)로 구성됩니다. Best-effort 포드는 메모리가 부족할 때 가장 먼저 종료됩니다. 포드 내의 <em>all</em> 컨테이너 에 제한이 설정 되거나 요청 및 제한이 동일한 값으로 설정되고 0이 아닌 경우 포드는 <em>guaranteed</em> (가장 높은 우선 순위)로 구성됩니다. 보장된 포드는 구성된 메모리 제한을 초과하지 않는 한 종료되지 않습니다. 제한 및 요청이 0이 아닌 다른 값으로 구성되거나 포드 내의 한 컨테이너가 제한을 설정하고 다른 컨테이너는 다른 리소스에 대해 제한이 설정되지 않거나 설정된 경우 포드는 <em>burstable</em> (중간 우선 순위)로 구성됩니다. 이러한 포드에는 일부 리소스 보장이 있지만 요청된 메모리를 초과하면 종료될 수 있습니다.</p>
<div class="admonition 주목">
<p class="admonition-title">주목</p>
</div>
<p>요청은 컨테이너 cgroup의 <code>memory_limit_in_bytes</code> 값에 영향을 미치지 않습니다. cgroup 제한은 호스트에서 사용 가능한 메모리 양으로 설정됩니다. 그럼에도 불구하고 요청 값을 너무 낮게 설정하면 노드가 메모리 압력을 받는 경우 포드가 kubelet에 의해 종료 대상이 될 수 있습니다.</p>
<table>
<thead>
<tr>
<th align="left">클래스</th>
<th align="left">우선순위</th>
<th align="left">조건</th>
<th align="left">죽이기 조건</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">보장</td>
<td align="left">최고</td>
<td align="left">제한 = 요청 != 0</td>
<td align="left">메모리 제한만 초과</td>
</tr>
<tr>
<td align="left">버스트 가능</td>
<td align="left">매체</td>
<td align="left">제한 != 요청 != 0</td>
<td align="left">요청 메모리를 초과하면 죽을 수 있음</td>
</tr>
<tr>
<td align="left">최선의 노력</td>
<td align="left">최저</td>
<td align="left">한도 및 요청이 설정되지 않음</td>
<td align="left">메모리가 부족할 때 가장 먼저 죽임을 당함</td>
</tr>
</tbody>
</table>
<p>리소스 QoS에 대한 추가 정보는 <a href="https://github.com/kubernetes/community/blob/master/contributors/design-proposals/node/resource-qos.md"> Kubernetes 설명서 </a>를 참조하십시오.</p>
<p>네임스페이스에 <a href="https://kubernetes.io/docs/concepts/policy/resource-quotas/"> 리소스 할당량 </a>을 설정하거나 <a href="https: //kubernetes.io/docs/concepts/policy/limit-range/"> 제한 범위 </a>. 리소스 할당량을 사용하면 네임스페이스에 할당된 총 리소스 양(예: CPU 및 RAM)을 지정할 수 있습니다. 네임스페이스에 적용되면 해당 네임스페이스에 배포된 모든 컨테이너에 대한 요청 및 제한을 지정해야 합니다. 반대로 제한 범위를 사용하면 리소스 할당을 보다 세밀하게 제어할 수 있습니다. 제한 범위를 사용하면 파드당 또는 네임스페이스 내의 컨테이너당 CPU 및 메모리 리소스를 최소/최대로 설정할 수 있습니다. 제공되지 않은 경우 이를 사용하여 기본 요청/제한 값을 설정할 수도 있습니다.</p>
<p>Policy-as-code 솔루션을 사용하여 요청 및 제한을 적용할 수 있습니다. 또는 네임스페이스가 생성될 때 리소스 할당량 및 제한 범위를 생성할 수도 있습니다.</p>
<h3 id="_12">특권 에스컬레이션을 허용하지 않음<a class="headerlink" href="#_12" title="Permanent link">&para;</a></h3>
<p>특권 에스컬레이션을 통해 프로세스는 실행 중인 보안 컨텍스트를 변경할 수 있습니다. Sudo는 SUID 또는 SGID 비트가 있는 바이너리와 마찬가지로 이에 대한 좋은 예입니다. 특권 에스컬레이션은 기본적으로 사용자가 다른 사용자 또는 그룹의 권한으로 파일을 실행하는 방법입니다. <code>allowPrivilegeEscalation</code> 을 <code>false</code>로 설정하는 정책 코드 변경 정책을 구현하거나 <code>podSpec</code>에서 <code>securityContext.allowPrivilegeEscalation</code>을 설정하여 컨테이너가 권한 있는 에스컬레이션을 사용하지 못하도록 방지 할 수 있습니다 . Policy-as-code 정책을 사용하여 잘못된 설정이 감지된 경우 API 서버 요청이 성공하지 못하도록 할 수도 있습니다. 포드 보안 표준을 사용하여 포드가 권한 에스컬레이션을 사용하지 못하도록 할 수도 있습니다.</p>
<h3 id="serviceaccount">ServiceAccount 토큰 탑재 비활성화<a class="headerlink" href="#serviceaccount" title="Permanent link">&para;</a></h3>
<p>Kubernetes API에 액세스할 필요가 없는 포드의 경우 다음을 비활성화할 수 있습니다.
포드 사양 또는 모든 포드에 대한 ServiceAccount 토큰 자동 마운트
특정 ServiceAccount를 사용합니다.</p>
<div class="admonition 주목">
<p class="admonition-title">주목</p>
</div>
<p>ServiceAccount 마운팅을 비활성화해도 포드가 네트워크에 연결되지 않습니다.
Kubernetes API에 대한 액세스. 포드가 네트워크를 가지지 못하도록 하려면
Kubernetes API에 액세스하려면 [EKS 클러스터
끝점 액세스][eks-ep-access] 및 사용
포드 액세스를 차단하는 <a href="../network/#network-policy">NetworkPolicy</a></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="nt">api버전 </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">v1</span>
<a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a><span class="nt">종류 </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">포드</span>
<a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a><span class="nt">메타데이터 </span><span class="p">:</span>
<a id="__codelineno-10-4" name="__codelineno-10-4" href="#__codelineno-10-4"></a><span class="w">  </span><span class="nt">이름 </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pod-no-automount</span>
<a id="__codelineno-10-5" name="__codelineno-10-5" href="#__codelineno-10-5"></a><span class="nt">사양 </span><span class="p">:</span>
<a id="__codelineno-10-6" name="__codelineno-10-6" href="#__codelineno-10-6"></a><span class="w">  </span><span class="nt">automountServiceAccountToken </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">거짓</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a><span class="nt">api버전 </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">v1</span>
<a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a><span class="nt">종류 </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ServiceAccount</span>
<a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a><span class="nt">메타데이터 </span><span class="p">:</span>
<a id="__codelineno-11-4" name="__codelineno-11-4" href="#__codelineno-11-4"></a><span class="w">  </span><span class="nt">이름 </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">sa-no-automount</span>
<a id="__codelineno-11-5" name="__codelineno-11-5" href="#__codelineno-11-5"></a><span class="nt">automountServiceAccountToken </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">거짓</span>
</code></pre></div>
<h3 id="_13">서비스 검색 비활성화<a class="headerlink" href="#_13" title="Permanent link">&para;</a></h3>
<p>클러스터 내 서비스를 조회하거나 호출할 필요가 없는 포드의 경우 다음을 수행할 수 있습니다.
Pod에 제공되는 정보의 양을 줄입니다. Pod의 DNS를 설정할 수 있습니다.
CoreDNS를 사용하지 않고 포드의 네임스페이스에서 서비스를 다음과 같이 노출하지 않는 정책
환경 변수. 환경에 대한 <a href="https://kubernetes.io/docs/concepts/services-networking/service/#environment-variables">Kubernetes 문서를 참조하십시오.
변수</a> 서비스 링크에 대한 자세한 내용을 참조하십시오. 기본값
Pod의 DNS 정책에 대한 값은 클러스터 내 DNS를 사용하는 "ClusterFirst"입니다.
기본값이 아닌 "기본값"은 기본 노드의 DNS 확인을 사용합니다. 보다
<a href="https://kubernetes.io/docs/concepts/services-networking/dns-pod-service/#pod-s-dns-policy"> Pod DNS 정책에 대한 Kubernetes 문서 </a>를 참조하세요.</p>
<div class="admonition 주목">
<p class="admonition-title">주목</p>
</div>
<p>서비스 링크를 비활성화하고 포드의 DNS 정책을 변경해도
pod가 클러스터 내 DNS 서비스에 대한 네트워크 액세스 권한을 가지지 못하도록 합니다. 공격자
클러스터 내 DNS에 도달하여 클러스터의 서비스를 계속 열거할 수 있습니다.
서비스. (예: <code>dig SRV *.*.svc.cluster.local @$CLUSTER_DNS_IP</code>)
클러스터 내 서비스 검색, <a href="../network/#network-policy">NetworkPolicy</a> 사용
포드 액세스를 차단하기 위해</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a><span class="nt">api버전 </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">v1</span>
<a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a><span class="nt">종류 </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">포드</span>
<a id="__codelineno-12-3" name="__codelineno-12-3" href="#__codelineno-12-3"></a><span class="nt">메타데이터 </span><span class="p">:</span>
<a id="__codelineno-12-4" name="__codelineno-12-4" href="#__codelineno-12-4"></a><span class="w">  </span><span class="nt">이름 </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pod-no-service-info</span>
<a id="__codelineno-12-5" name="__codelineno-12-5" href="#__codelineno-12-5"></a><span class="nt">사양 </span><span class="p">:</span>
<a id="__codelineno-12-6" name="__codelineno-12-6" href="#__codelineno-12-6"></a><span class="w">    </span><span class="nt">dnsPolicy </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">기본값</span><span class="w"> </span><span class="c1"># &quot;Default&quot;는 실제 기본값이 아닙니다.</span>
<a id="__codelineno-12-7" name="__codelineno-12-7" href="#__codelineno-12-7"></a><span class="w">    </span><span class="nt">enableServiceLinks </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">거짓</span>
</code></pre></div>
<h3 id="_14">읽기 전용 루트 파일 시스템으로 이미지 구성<a class="headerlink" href="#_14" title="Permanent link">&para;</a></h3>
<p>읽기 전용 루트 파일 시스템으로 이미지를 구성하면 공격자가 애플리케이션에서 사용하는 파일 시스템의 바이너리를 덮어쓰지 못하도록 방지할 수 있습니다. 애플리케이션이 파일 시스템에 기록해야 하는 경우 임시 디렉터리에 기록하거나 볼륨을 연결 및 마운트하는 것이 좋습니다. 포드의 SecurityContext를 다음과 같이 설정하여 이를 적용할 수 있습니다.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a><span class="nn">...</span>
<a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a><span class="nt">보안 컨텍스트 </span><span class="p">:</span>
<a id="__codelineno-13-3" name="__codelineno-13-3" href="#__codelineno-13-3"></a><span class="w">  </span><span class="nt">readOnlyRootFilesystem </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">참</span>
<a id="__codelineno-13-4" name="__codelineno-13-4" href="#__codelineno-13-4"></a><span class="nn">...</span>
</code></pre></div>
<p>Policy-as-code 및 Pod 보안 표준을 사용하여 이 동작을 시행할 수 있습니다.</p>
<div class="admonition 정보">
<p class="admonition-title">정보</p>
</div>
<p><a href="https://kubernetes.io/docs/concepts/windows/intro/">Kubernetes의 Windows 컨테이너</a>에 따라 <code>securityContext.readOnlyRootFilesystem</code>은 다음으로 설정할 수 없습니다.
레지스트리 및 시스템 프로세스가 컨테이너 내에서 실행되기 위해서는 쓰기 액세스가 필요하므로 Windows에서 실행되는 컨테이너의 경우 'true'.</p>
<h2 id="_15">도구 및 리소스<a class="headerlink" href="#_15" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="https://github.com/open-policy-agent/gatekeeper-library"> open-policy-agent/gatekeeper-library: OPA Gatekeeper 정책 라이브러리 </a> OPA/Gatekeeper 정책 라이브러리로 사용할 수 있습니다. PSP를 대체합니다.</li>
<li><a href="https://kyverno.io/policies/"> Kyverno 정책 라이브러리 </a></li>
<li>EKS에 대한 일반적인 OPA 및 Kyverno <a href="https://github.com/aws/aws-eks-best-practices/tree/master/policies"> 정책 </a> 모음.</li>
<li><a href="https://aws.amazon.com/blogs/containers/policy-based-countermeasures-for-kubernetes-part-1/"> 정책 기반 대책: 파트 1 </a></li>
<li><a href="https://aws.amazon.com/blogs/containers/policy-based-countermeasures-for-kubernetes-part-2/"> 정책 기반 대책: 파트 2 </a></li>
<li><a href="https://appvia.github.io/psp-migration/"> Pod Security Policy Migrator </a> PSP를 OPA/Gatekeeper, KubeWarden 또는 Kyverno 정책으로 변환하는 도구</li>
</ul>


  




                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../../..", "features": ["tabs", "content.code.copy", "announce.dismiss", "header.autohide"], "search": "../../../assets/javascripts/workers/search.16e2a7d4.min.js", "translations": {"clipboard.copied": "\ud074\ub9bd\ubcf4\ub4dc\uc5d0 \ubcf5\uc0ac\ub428", "clipboard.copy": "\ud074\ub9bd\ubcf4\ub4dc\ub85c \ubcf5\uc0ac", "search.config.lang": "en", "search.config.pipeline": " ", "search.config.separator": "[\\s\\-]+", "search.placeholder": "\uac80\uc0c9", "search.result.more.one": "\uc774 \ubb38\uc11c\uc5d0\uc11c 1\uac1c\uc758 \uac80\uc0c9 \uacb0\uacfc \ub354 \ubcf4\uae30", "search.result.more.other": "\uc774 \ubb38\uc11c\uc5d0\uc11c #\uac1c\uc758 \uac80\uc0c9 \uacb0\uacfc \ub354 \ubcf4\uae30", "search.result.none": "\uac80\uc0c9\uc5b4\uc640 \uc77c\uce58\ud558\ub294 \ubb38\uc11c\uac00 \uc5c6\uc2b5\ub2c8\ub2e4", "search.result.one": "1\uac1c\uc758 \uc77c\uce58\ud558\ub294 \ubb38\uc11c", "search.result.other": "#\uac1c\uc758 \uc77c\uce58\ud558\ub294 \ubb38\uc11c", "search.result.placeholder": "\uac80\uc0c9\uc5b4\ub97c \uc785\ub825\ud558\uc138\uc694", "search.result.term.missing": "\ud3ec\ud568\ub418\uc9c0 \uc54a\uc740 \uac80\uc0c9\uc5b4", "select.version.title": "\ubc84\uc804 \uc120\ud0dd"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.5a2dcb6a.min.js"></script>
      
    
    
  </body>
</html>